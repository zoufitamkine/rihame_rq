{% load i18n static %}
<!doctype html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>{% block title %}{% trans "Admin Panel" %}{% endblock %}</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
--accent: #d3b689;
--beige: #f5f0e6;
--dark: #0b1145;
}

.accent-bg{ background-color: var(--accent); }
.accent-text{ color: var(--accent); }
.beige-bg{ background-color: var(--beige); }
.dark-bg{ background-color: var(--dark); }

/* Smooth transitions */
* { transition: all 0.3s ease; }

/* Custom scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; }
::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #c4a578; }

/* Sidebar overlay for mobile */
.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 30;
}

.sidebar-overlay.active {
  display: block;
}

/* Active menu item */
.nav-item.active {
  background-color: var(--beige);
  color: var(--accent);
  font-weight: 600;
}

/* Card hover effect */
.stat-card {
  transition: transform 0.2s, box-shadow 0.2s;
}
.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}
</style>

{% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gray-50">

<!-- Sidebar Overlay (Mobile) -->
<div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

<div class="flex min-h-screen">
  <!-- SIDEBAR -->
  {% include 'adminpanel/sidebar.html' %}

  <!-- MAIN CONTENT -->
  <div class="flex-1 flex flex-col min-h-screen">
    <!-- HEADER -->
    {% include 'adminpanel/header.html' %}

    <!-- MAIN -->
    <main class="flex-1 p-4 md:p-6 lg:p-8">
      {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer class="border-t bg-white p-4 text-center text-sm text-gray-500">
      <p>&copy; 2025 {% trans "Admin Panel" %} - {% trans "Tous droits réservés" %}</p>
    </footer>
  </div>
</div>

<script>
function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('sidebarOverlay');
  
  sidebar.classList.toggle('-translate-x-full');
  overlay.classList.toggle('active');
}

// Close sidebar when clicking on a link (mobile)
document.querySelectorAll('#sidebar a').forEach(link => {
  link.addEventListener('click', function() {
    if (window.innerWidth < 768) {
      toggleSidebar();
    }
  });
});

// Close sidebar on window resize to desktop
window.addEventListener('resize', function() {
  if (window.innerWidth >= 768) {
    document.getElementById('sidebar').classList.remove('-translate-x-full');
    document.getElementById('sidebarOverlay').classList.remove('active');
  }
});
</script>

{% block extra_js %}{% endblock %}
</body>
</html>